<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
</head>
<body>
	<script>
		"use strict";
			
		function formatDate(date) {
			var diff = new Date() - date;
			if (diff < 1000) {
				return "только что";
			}

			var sec = Math.floor(diff / 1000);
			if (sec < 60) {
				return sec + " сек. назад";
			}

			var min = Math.floor(sec / 60);
			if (min < 60) {
				return min + " мин. назад";
			}

			var d = date;
			d = [
				'0' + d.getDate(),
				'0' + (d.getMonth() + 1),
				'' + d.getFullYear(),
				'0' + d.getHours(),
				'0' + d.getMinutes()
			];
			
			for (var i = 0; i < d.length; i++) {
				d[i] = d[i].slice(-2);
			}
			
			return d.slice(0, 3).join('.') + ' ' + d.slice(3).join(':');
		}

		console.log(formatDate(new Date(new Date - 1)));
		console.log(formatDate(new Date(new Date - 40 * 1000)));
		console.log(formatDate(new Date(new Date - 5 * 60 * 1000)));
		console.log(formatDate(new Date(new Date - 86400 * 1000)));

	</script>
</body>
</html>